function SolvesVideo(){this.solvesPluginName="SolvesVideo",this.versionId=4,this.version="1.3",this.urlPublicVideos=null,this.urlVideos=null,this.urlCanais=null,this.youtubeApiKey=null,this.youtubeChannelUrl=null,this.youtubePlayer=null,this.youtubeRestUrlSearchChannel=null,this.videoDone=!1,this.videoPause=!1,this.initialSecondsToWatch=45,this.secondsToWatch=45,this.timeoutContagemWatch=null,this.doAjaxVideoFindToWatch=function(){},this.loggedInToWatchNextVideo=!0,this.selectFieldClass="select_youtube_videos",this.containerWatchPlayerElmId="watch_player",this.containerWatchPlayerDescElmId="watch_player_desc",this.containerWatchChannelDescElmId="watch_channel_desc",this.containerWatchChannelDescNameElmId="watch_channel_desc_name",this.containerWatchCounterElmId="watch_counter",this.containerWatchCounterNumberElmId="watch_counter_number",this.containerWatchCounterSecsElmId="watch_counter_secs",this.containerWatchNextElmId="watch_next",this.funcNext_string="$.SolvesVideo.watchNextVideo()",this.PARAM_NAME_VIDEOS="videos",this.txt_nomore_videos="<h2>Aguarde novos vídeos!</h2>Parece que todos os vídeos foram assistidos conforme a quantidade de pontos.",this.init=function(){$.Solves.addSolvesPlugin(this.solvesPluginName,$.SolvesVideo)},this.destroy=function(){},this.setYoutubeApiKey=function(t){this.youtubeApiKey=t},this.setInitialSecondsToWatch=function(t){this.initialSecondsToWatch=t,this.secondsToWatch=this.initialSecondsToWatch},this.restartSecondsToWatch=function(){this.secondsToWatch=this.initialSecondsToWatch},this.getYoutubeUrlApiDados=function(){return $.Solves.isNotEmpty(this.youtubeApiKey)?"https://www.googleapis.com/youtube/v3/channels?part=snippet&maxResults=1&key="+this.youtubeApiKey+"&":null},this.getYoutubeUrlApiDadosQuery=function(){return $.Solves.isNotEmpty(this.youtubeApiKey)?"https://www.googleapis.com/youtube/v3/search?part=snippet&type=channel&maxResults=1&key="+this.youtubeApiKey+"&":null},this.youtubeUrlApiEstatisticas=function(){return $.Solves.isNotEmpty(this.youtubeApiKey)?"https://www.googleapis.com/youtube/v3/channels?part=statistics&key="+this.youtubeApiKey+"&":null},this.getUrlPublicVideos=function(t){return this.urlPublicVideos+"?url="+t},this.getUrlVideos=function(t){return this.urlVideos+"?url="+t},this.showModalPublicWatchVideo=function(t,e){this.youtubePlayer=void 0;var o=$.Solves.getSolvesPlugin("SolvesUi");null!=o?(o.showModalSmall(t,'<div id="modal_player_container" class="modal_player_container">CARREGANDO VÍDEO...</div>','<a href="javascript:$.SolveUi.closeModalSmall();">Fechar</a>'),this.onYouTubeIframeAPIReady("modal_player_container",e)):console.log(this.solvesPluginName+" não encontrou SolvesUi")},this.listPublicWatchVideo=function(t){var e=$.Solves.getSolvesPlugin("SolvesStorage");if(null!=e){var o=e.getCache(this.PARAM_NAME_VIDEOS)[0];for(var i in $("#"+t).html(""),o){var a=o[i];this.appendHtmlItemListPublicWatchVideo(t,i,a)}o=null}else console.log(this.solvesPluginName+" não encontrou SolvesStorage")},this.appendHtmlItemListPublicWatchVideo=function(t,e,o){var i=this.getUrlPublicVideos(o.url);$("#"+t).prepend('<div class="col-lg-3 col-md-3 col-sm-3 col-xl-3 col-6 bg-white mg-b-10 list_'+t+'" id="v_'+e+'" data-qtd_list="'+t+'" data-item_list="'+e+'"><div class="thumb-img" align="center"><a target="_blank" rel="noopener" href="javascript:$.SolvesVideo.createContainerPublicWatchVideo('+e+');" alt="'+o.nome+'" title="'+o.nome+'"><img src="'+o.avatar+'" style="width: 100%;" class="img-responsive" title="'+o.nome+'" /></a></div><div class="caption" style="padding:4px">                            <a class="text-danger" href="'+i+'" alt="Ver detalhes do vídeo" title="Ver detalhes do vídeo"><b style="font-size: 12px;">'+o.nome+'</b></a><div><i class="fa fa-tag"></i> \x3c!--a href="/?cat='+o.categoria_video_id+'" alt="Ver detalhes da Categoria" title="Ver detalhes da Categoria"--\x3e'+o.categoria_video_id_label+"\x3c!--/a--\x3e</div></div></div>")},this.getHtmlVideoDesc=function(t){return'<h4 style="text-align: center;"><strong>VÍDEO: </strong> <a href="'+this.getUrlVideos(t.url)+'"  style="text-align: center;" alt="Ver detalhes do Vídeo" title="Ver detalhes do Vídeo">'+t.nome+"</a></h4><div>"+t.description+"</div>"},this.getPublicHtmlVideoDesc=function(t){return'<h4 style="text-align: center;"><strong>VÍDEO: </strong> <a href="'+this.getUrlPublicVideos(t.url)+'"  style="text-align: center;" alt="Ver detalhes do Vídeo" title="Ver detalhes do Vídeo">'+t.nome+"</a></h4><div>"+t.description+"</div>"},this.createContainerPublicWatchVideo=function(t){var e=$.Solves.getSolvesPlugin("SolvesStorage");if(null!=e){for(var o in $.Solves.objeto=e.getCache(this.PARAM_NAME_VIDEOS)[0][t],$("#"+elmContainerId).html(""),lista){var i=lista[o];this.appendHtmlItemListPublicWatchVideo(elmContainerId,o,i)}lista=null}else console.log(this.solvesPluginName+" não encontrou SolvesStorage");this.youtubePlayer=void 0,$("#v_"+t+"_player_container").remove(),$(".player_container").remove();$("#v_"+t).attr("data-qtd_list"),$("#v_"+t).attr("data-item_list");$("#v_"+t).after('<div class="player_container col-12 mt-2 mb-3" id="v_'+t+'_player_container"><div class="card overflow-hidden"><div class="card-body pd-0 bd-color-gray-lighter"><center><div class="row" style="padding: 8px; background: rgb(85, 85, 85); color: #FFFFFF;"><div class="col-12 col-sm-6" style="text-align:left;"><div><strong>CANAL: </strong><span id="'+this.containerWatchChannelDescNameElmId+'"></span></div></div><div class="col-12 col-sm-6" style="text-align:right;min-height: 50px;"><div id="'+this.containerWatchChannelDescElmId+'">'+this.getSubscribeButton($.Solves.objeto.channel_id_url,!0)+'</div></div></div><div id="'+this.containerWatchPlayerElmId+'">CARREGANDO VÍDEO...\x3c!-- VIDEO WILL BE EMBEDED HERE--\x3e</div><div id="'+this.containerWatchPlayerDescElmId+'" style="padding: 8px;background: rgb(192, 192, 192); color:#000000;">'+this.getPublicHtmlVideoDesc($.Solves.objeto)+"</div></center></div>\x3c!-- card-body --\x3e              </div>\x3c!-- card --\x3e</div>").focus(),this.onYouTubeIframeAPIReady(this.containerWatchPlayerElmId,$.Solves.objeto.url)},this.contagem_tempo=function(t,e,o,i,a){if(0==this.secondsToWatch)this.restartSecondsToWatch(),$("#"+i).hide(),$("#"+t).html(0),$("#"+e).html("segundo"),this.unblockNextButtonVideo(o,a);else{if(!this.videoPause){$("#"+i).show(),this.blockNextButtonVideo(o),$("#"+t).html(this.secondsToWatch),$("#"+e).html("segundo"+(this.secondsToWatch>1?"s":""));var s=this.secondsToWatch==this.initialSecondsToWatch?4e3:1e3;this.secondsToWatch=this.secondsToWatch-1}this.timeoutContagemWatch=setTimeout("$.SolvesVideo.contagem_tempo('"+t+"', '"+e+"', '"+o+"', '"+i+"', '"+a+"')",s)}},this.blockNextButtonVideo=function(t){$("#"+t).removeClass("btn-success").addClass("btn-dark").attr("aria-disabled","true").attr("disabled","true").addClass("disabled").attr("href","return false")},this.unblockNextButtonVideo=function(t,e){$("#"+t).removeClass("btn-dark").addClass("btn-success").removeAttr("aria-disabled").removeAttr("disabled").removeClass("disabled").attr("href","javascript:"+e)},this.watchNextVideo=function(){if(!this.loggedInToWatchNextVideo||$.Solves.isLogado())this.doAjaxVideoFindToWatch(this.containerWatchPlayerElmId,this.containerWatchPlayerDescElmId,this.containerWatchChannelDescElmId,this.containerWatchChannelDescNameElmId);else{this.stopAndClosePlayer();var t=$.Solves.getSolvesPlugin("SolvesUi");null!=t&&t.closeModalSmall()}},this.likeVideo=function(t){$.ajax({type:"POST",url:"https://www.googleapis.com/youtube/v3/videos/rate",processData:!1,contentType:!1,cache:!1,data:{id:t,rating:"like"},success:function(t){console.log(t)},error:function(t){console.log(t)}})},this.getSubscribeButton=function(t,e){return(null==document.scripts["apis-google-platform"]?'<script src="https://apis.google.com/js/platform.js" id="apis-google-platform"><\/script>':"")+'<div class="g-ytsubscribe" data-channelid="'+t+'" '+(e?'data-layout="full"':"")+' data-theme="dark" data-count="default"></div>'},this.stopAndClosePlayer=function(){null!=this.youtubePlayer&&null!=this.youtubePlayer&&(this.youtubePlayer.stopVideo(),this.youtubePlayer.clearVideo())},this.getPlayerDuration=function(){return void 0!==this.youtubePlayer&&null!=this.youtubePlayer?Math.round(this.youtubePlayer.getDuration()):0},this.showNoVideoPlayer=function(t,e,o,i){this.blockNextButtonVideo("watch_next"),$("#"+t+"_msg").length>0&&$("#"+t+"_msg").remove(),$("#"+t).hide(),$("#"+o).hide(),$('<div id="'+t+'_msg" class="mg-b-50 mg-t-50">'+this.txt_nomore_videos+"</div>").insertAfter("#"+t)},this.onYouTubeIframeAPIReady=function(t,e){if(0!=$("#"+t).length)if(this.videoDone=!1,null==this.youtubePlayer||null==this.youtubePlayer){var o=320;void 0!==window.innerWidth&&null!=window.innerWidth&&(o=window.innerWidth,(o-=o>992?418:40)>711&&(o=711));var i=56.25*o/100,a=this;this.youtubePlayer=new YT.Player(t,{height:i,width:o,videoId:e,events:{onReady:function(t){a.onPlayerReady(t,this)},onStateChange:function(t){a.onPlayerStateChange(t,this)}}})}else this.youtubePlayer.loadVideoById({videoId:e,startSeconds:0}),this.startContadorTempoMinimoVideo()},this.onPlayerReady=function(t,e){console.log(t),console.log(e),t.target.playVideo(),this.startContadorTempoMinimoVideo()},this.startContadorTempoMinimoVideo=function(){this.loggedInToWatchNextVideo&&!$.Solves.isLogado()||(this.restartSecondsToWatch(),this.contagem_tempo(this.containerWatchCounterNumberElmId,this.containerWatchCounterSecsElmId,this.containerWatchNextElmId,this.containerWatchCounterElmId,this.funcNext_string))},this.onPlayerStateChange=function(t,e){console.log(t),console.log(e),this.youtubePlayer.getPlayerState()==YT.PlayerState.ENDED?this.watchNextVideo():this.youtubePlayer.getPlayerState()==YT.PlayerState.PLAYING?(this.videoPause=!1,$.Solves.loaded(),0==this.secondsToWatch&&this.restartSecondsToWatch()):this.youtubePlayer.getPlayerState()==YT.PlayerState.UNSTARTED&&0==this.getPlayerDuration()?(this.videoPause=!1,this.secondsToWatch=0):this.videoPause=!0},this.stopVideo=function(){this.youtubePlayer.stopVideo()},this.getVideoIdYoutubeByUrl=function(t){return t=(t=(t=(t=(t=(t=(t=(t=$.Solves.removeEspacos(t)).replace("https://www.youtube.com/watch?v=","")).replace("http://www.youtube.com/watch?v=","")).replace("http://m.youtube.com/watch?v=","")).replace("https://m.youtube.com/watch?v=","")).replace("https://youtu.be/","")).replace("http://youtu.be/","")).replace("https://www.youtube.com/","")},this.getChannelIdYoutubeByUrl=function(t){return t=(t=$.Solves.removeEspacos(t)).replace("https://www.youtube.com/channel/","")},this.configSelect2Channels=function(t,e){this.selectFieldClass=e,$("."+this.selectFieldClass).length>0&&$("."+this.selectFieldClass).select2({language:"pt-BR",dropdownParent:$("#"+t),ajax:{type:"POST",processData:!1,contentType:!1,cache:!1,url:this.youtubeRestUrlSearchChannel,headers:{Authorization:""},data:function(t){return getFormData({term:t.term})},processResults:function(t){if(null!=t&&null!=t){result=jQuery.parseJSON(t);var e=[];if(void 0!==result)for(var o in result){var i=result[o];if(null!=i&&null!=i.id&&null!=i.nome){var a='<div class="list_item_canal_container"><div class="item_canal_image_container"><img class="item_canal_image img-responsive" src="'+i.avatar+'"></div><div class="item_canal_nome">'+i.nome+"</div></div>";e.push({id:i.id,text:i.nome,html:a,avatar:i.avatar,nome:i.nome})}}return{results:e}}},success:function(t){},error:function(t){}},placeholder:"Selecione seu canal no Youtube",minimumInputLength:3,templateResult:function(t){return $(t.html)},templateSelection:function(t){return t.nome||t.url}}).on("select2:select",function(t){var e=t.params.data,o="https://www.youtube.com/channel/"+e.id;$("#user_avatar").length>0&&$("#user_avatar").val(e.avatar),$("#user_avatar_prev").length>0&&$("#user_avatar_prev").attr("src",e.avatar),$("#channel_avatar").length>0&&$("#channel_avatar").val(e.avatar),$("#channel_avatar_prev").length>0&&$("#channel_avatar_prev").attr("src",e.avatar),$("#channel_nome").val(e.nome),$("#label_channel_nome").html(e.nome),$("#channel_url").val(o),$("#label_channel_url").html(o)})}}$.SolvesVideo=new SolvesVideo,$.SolvesVideo.init();